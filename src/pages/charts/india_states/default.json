{
    "$schema": "https://vega.github.io/schema/vega/v5.json",
    "description": "An interactive world map supporting pan and zoom.",
    "background": "#f0f8ff",
    "autosize": "none",

    "signals": [
    {
        "name": "width",
        "init": "containerSize()[0]"
    },
    {
        "name": "height",
        "init": "containerSize()[1]"
    },
    {
        "name": "tx",
        "update": "width / 2"
    },
    {
        "name": "ty",
        "update": "height / 2"
    },
    {
        "name": "scale",
        "value": 1400,
        "on": [
        {
            "events":
            {
                "type": "wheel",
                "consume": true
            },
            "update": "clamp(scale * pow(1.0005, -event.deltaY * pow(16, event.deltaMode)), 150, 3000)"
        }]
    },
    {
        "name": "angles",
        "value": [0, 0],
        "on": [
        {
            "events": "mousedown",
            "update": "[rotateX, centerY]"
        }]
    },
    {
        "name": "cloned",
        "value": null,
        "on": [
        {
            "events": "mousedown",
            "update": "copy('projection')"
        }]
    },
    {
        "name": "start",
        "value": null,
        "on": [
        {
            "events": "mousedown",
            "update": "invert(cloned, xy())"
        }]
    },
    {
        "name": "drag",
        "value": null,
        "on": [
        {
            "events": "[mousedown, window:mouseup] > window:mousemove",
            "update": "invert(cloned, xy())"
        }]
    },
    {
        "name": "delta",
        "value": null,
        "on": [
        {
            "events":
            {
                "signal": "drag"
            },
            "update": "[drag[0] - start[0], start[1] - drag[1]]"
        }]
    },
    {
        "name": "rotateX",
        "value": -80,
        "on": [
        {
            "events":
            {
                "signal": "delta"
            },
            "update": "angles[0] + delta[0]"
        }]
    },
    {
        "name": "centerY",
        "value": 23,
        "on": [
        {
            "events":
            {
                "signal": "delta"
            },
            "update": "clamp(angles[1] + delta[1], -60, 60)"
        }]
    }],

    "projections": [
    {
        "name": "projection",
        "type": "mercator",
        "scale":
        {
            "signal": "scale"
        },
        "rotate": [
        {
            "signal": "rotateX"
        }, 0, 0],
        "center": [0,
        {
            "signal": "centerY"
        }],
        "translate": [
        {
            "signal": "tx"
        },
        {
            "signal": "ty"
        }]
    }],

    "data": [
    {
        "name": "table",
        "values": [
        {
            "State": "Andaman and Nicobar",
            "ID": 1287,
            "Value": 95308
        },
        {
            "State": "Andhra Pradesh",
            "ID": 1288,
            "Value": 15556590
        },
        {
            "State": "Arunachal Pradesh",
            "ID": 1289,
            "Value": 379679
        },
        {
            "State": "Assam",
            "ID": 1290,
            "Value": 9135937
        },
        {
            "State": "Bihar",
            "ID": 1291,
            "Value": 21763712
        },
        {
            "State": "Chandigarh",
            "ID": 1292,
            "Value": 231188
        },
        {
            "State": "Chhattisgarh",
            "ID": 1293,
            "Value": 6967708
        },
        {
            "State": "Dadra and Nagar Haveli",
            "ID": 1294,
            "Value": 90421
        },
        {
            "State": "Daman and Diu",
            "ID": 1295,
            "Value": 37597
        },
        {
            "State": "Delhi",
            "ID": 1296,
            "Value": 4908541
        },
        {
            "State": "Goa",
            "ID": 1297,
            "Value": 446405
        },
        {
            "State": "Gujarat",
            "ID": 1298,
            "Value": 18091275
        },
        {
            "State": "Haryana",
            "ID": 1299,
            "Value": 7357347
        },
        {
            "State": "Himachal Pradesh",
            "ID": 1300,
            "Value": 2661281
        },
        {
            "State": "Jammu and Kashmir",
            "ID": 1301,
            "Value": 1905647
        },
        {
            "State": "Jharkhand",
            "ID": 1302,
            "Value": 8443614
        },
        {
            "State": "Karnataka",
            "ID": 1303,
            "Value": 19105308
        },
        {
            "State": "Kerala",
            "ID": 1304,
            "Value": 9639504
        },
        {
            "State": "Lakshadweep",
            "ID": 1305,
            "Value": 22851
        },
        {
            "State": "Madhya Pradesh",
            "ID": 1306,
            "Value": 21444447
        },
        {
            "State": "Maharashtra",
            "ID": 1307,
            "Value": 27959632
        },
        {
            "State": "Manipur",
            "ID": 1308,
            "Value": 627159
        },
        {
            "State": "Meghalaya",
            "ID": 1309,
            "Value": 724144
        },
        {
            "State": "Mizoram",
            "ID": 1310,
            "Value": 224286
        },
        {
            "State": "Nagaland",
            "ID": 1311,
            "Value": 500510
        },
        {
            "State": "Orissa",
            "ID": 1312,
            "Value": 10582181
        },
        {
            "State": "Puducherry",
            "ID": 1313,
            "Value": 444981
        },
        {
            "State": "Punjab",
            "ID": 1314,
            "Value": 5984888
        },
        {
            "State": "Rajasthan",
            "ID": 1315,
            "Value": 19628443
        },
        {
            "State": "Sikkim",
            "ID": 1316,
            "Value": 166922
        },
        {
            "State": "Tamil Nadu",
            "ID": 1317,
            "Value": 22380373
        },
        {
            "State": "Tripura",
            "ID": 1318,
            "Value": 1055658
        },
        {
            "State": "Uttar Pradesh",
            "ID": 1319,
            "Value": 45709922
        },
        {
            "State": "Uttaranchal",
            "ID": 1320,
            "Value": 2954833
        },
        {
            "State": "West Bengal",
            "ID": 1321,
            "Value": 27195928
        }]
    },
    {
        "name": "world",
        "url": "https://raw.githubusercontent.com/deldersveld/topojson/master/countries/india/india-states.json",
        "format":
        {
            "type": "topojson",
            "feature": "IND_adm1"
        },
        "transform": [
        {
            "type": "lookup",
            "from": "table",
            "key": "ID",
            "fields": ["properties.ID_1"],
            "values": ["ID", "Value", "State"]
        }]
    },
    {
        "name": "graticule",
        "transform": [
        {
            "type": "graticule",
            "step": [15, 15]
        }]
    }],
    "scales": [
    {
        "domain":
        {
            "data": "world",
            "field": "Value"
        },
        "interpolate": "hcl",
        "name": "color",
        "range":
        {
            "scheme": "Oranges"
        },
        "type": "linear",
        "zero": false
    }],

    "marks": [
    {
        "type": "shape",
        "from":
        {
            "data": "graticule"
        },
        "encode":
        {
            "enter":
            {
                "strokeDash":
                {
                    "value": 1
                },
                "strokeWidth":
                {
                    "value": 1
                },
                "stroke":
                {
                    "value": "#dddddd"
                },
                "strokeOpacity":
                {
                    "value": 1
                },
                "fill":
                {
                    "value": null
                }
            }
        },
        "transform": [
        {
            "type": "geoshape",
            "projection": "projection"
        }]
    },
    {
        "type": "shape",
        "from":
        {
            "data": "world"
        },
        "encode":
        {
            "update":
            {
                "tooltip":
                {
                    "signal": "{\"Name\": datum[\"State\"], \"Value\": format(datum[\"Value\"], \",\")}"
                },
                "strokeOpacity":
                {
                    "value": 1
                },
                "strokeWidth":
                {
                    "value": 1
                },
                "stroke":
                {
                    "value": "#bbbbbb"
                },
                "fill":
                {
                    "scale": "color",
                    "field": "Value"
                }
            },
            "hover":
            {
                "fill":
                {
                    "value": "red"
                },
                "strokeWidth":
                {
                    "value": 2
                },
                "stroke":
                {
                    "value": "#bbbbbb"
                }
            }
        },
        "transform": [
        {
            "type": "geoshape",
            "projection": "projection"
        }]
    }],
    "legends": [
    {
        "fill": "color",
        "title": "Winner Votes",
        "orient": "none",
        "encode":
        {
            "symbols":
            {
                "enter":
                {
                    "fillOpacity":
                    {
                        "value": 0.5
                    }
                }
            },
            "labels":
            {
                "update":
                {
                    "text":
                    {
                        "field": "value",
                        "format": ","
                    }
                }
            }
        }
    }]
}